<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Verifying Large Refactors • Robin Rendle</title><meta name="description"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/_astro/common-ZuqbKU.css" type="text/css"><link rel="sitemap" href="/sitemap.xml"><link rel="alternate" type="application/rss+xml" href="/feed/posts.xml"><link rel="canonical" href="http://robinrendle.com/notes/verifying-large-refactors/"><meta property="og:title" content="Verifying Large Refactors"><meta property="og:description"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="icon" type="image/png" href="/favicon.png"><style type="text/css">

.wide-wrapper.astro-V2H4nGwR {
  max-width: 1800px;
  padding: 0 30px;
}

.wrapper.astro-V2H4nGwR {
  padding: 0 15px;
  margin: 0 auto;
}
@media screen and (min-width: 900px) {
  .wrapper.astro-V2H4nGwR {
    margin-top: 0;
    max-width: 720px;
  }
}

h1.astro-V2H4nGwR {
  font-weight: bold;
  font-size: 2.2em;
  font-family: National, var(--font-fallback);
}

.header.astro-V2H4nGwR {
  margin-top: 30px;
  border-top: 1px solid var(--color-background);
}
@media screen and (min-width: 900px) {
  .header.astro-V2H4nGwR {
    margin-top: 60px;
  }
}

.page-title.astro-V2H4nGwR, main.astro-V2H4nGwR {
  margin-top: 0;
}

.page-title.astro-V2H4nGwR {
  margin-bottom: 30px;
}

.article.astro-V2H4nGwR {
  margin-top: 0;
  padding-bottom: 200px;
}
@media screen and (min-width: 900px) {
  .article.astro-V2H4nGwR {
    grid-column: 6/13;
  }
}

.time.astro-V2H4nGwR {
  margin-bottom: 5px;
  color: var(--color-subtext);
  border-top: 1px solid var(--color-background);
}</style>
</head><body><div class="header astro-ahFEmudE"><div class="title astro-ahFEmudE"><a href="/" class="astro-ahFEmudE">Robin Rendle</a></div><nav class="nav astro-ahFEmudE"><a href="/notes" class="astro-ahFEmudE">Notes</a><a href="/essays" class="astro-ahFEmudE">Essays</a><a href="/adventures" class="astro-ahFEmudE">Adventures</a></nav></div><main class="astro-V2H4nGwR"><div class="header astro-V2H4nGwR"><div class="wrapper astro-V2H4nGwR"><div class="time astro-V2H4nGwR"><time datetime="2020-10-20T20:11:05.042Z" class="astro-V2H4nGwR">October 20, 2020</time> • San Francisco, California</div><h1 class="page-title astro-V2H4nGwR">Verifying Large Refactors</h1></div></div><div class="wrapper astro-V2H4nGwR"><article class="article astro-V2H4nGwR"><p class="astro-LVY93qGa">I love this post from Mark Story about how he used the Sentry app <a href="https://blog.sentry.io/2020/10/20/verifying-large-refactors-in-production-with-sentry" class="astro-LVY93qGa">on a big refactor</a> of Sentry itself:</p><blockquote class="astro-LVY93qGa"><p class="astro-LVY93qGa">Recently we used Sentry to ensure we didn’t break Sentry while doing a large refactor. When replacing an API or code path with a new implementation you’ll likely ‘deprecate’ the old path, but how do you know when that old path is finally not in use? If your code is running on a server, you could use metrics or logs, but even with them, it can be challenging to capture the required context to pinpoint where deprecated code is still in use. If your code is on the frontend logs are not an option, and you’ll need to be more creative.</p></blockquote><p class="astro-LVY93qGa">Mark shows how even a simple refactor, like changing the icons of some components can be this daunting problem because it’s so hard to see <a href="https://www.robinrendle.com/essays/systems-mistakes-and-the-sea" class="astro-LVY93qGa">the hyperobject</a> properly; searching through a codebase for all the instances of a component can be really tough and sometimes even impossible. Welp.</p><p class="astro-LVY93qGa">For context, I work at Sentry too. But! I still think this kind of dogfooding is amazing and I’m constantly surprised by how we can use our own app internally to make our own app better. It’s darn impressive.</p></article></div></main></body></html>